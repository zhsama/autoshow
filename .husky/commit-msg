#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# Ëé∑ÂèñcommitÊ∂àÊÅØ
commit_msg=$(cat "$1")

# Âü∫Á°ÄcommitlintÈ™åËØÅ
echo "üìù Validating commit message format..."
npx --no-install commitlint --edit "$1"

# Ê£ÄÊü•ÊòØÂê¶‰∏∫fixupÊàñsquash commit (Ë∑≥ËøáÊüê‰∫õÊ£ÄÊü•)
if echo "$commit_msg" | grep -E "^(fixup|squash)!" > /dev/null; then
    echo "‚è≠Ô∏è Detected fixup/squash commit, skipping additional checks"
    exit 0
fi

echo "‚úÖ Commit message validation passed!"